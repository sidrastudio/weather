<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Weather App</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  transition:0.4s ease;
}
body{
  height:100vh;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(180deg,#6a5cff,#8f7bff);
  overflow:hidden;
  color:#222;
}
body.dark{
  background:linear-gradient(180deg,#0b1d2a,#162a3a);
  color:#fff;
}

/* BACKGROUND LAYERS */
.bg{
  position:absolute;
  inset:0;
  z-index:-1;
}

/* CLOUDS */
.cloud{
  position:absolute;
  background:white;
  border-radius:50px;
  opacity:.6;
  animation:cloudMove linear infinite;
}
.cloud::before,.cloud::after{
  content:"";
  position:absolute;
  background:inherit;
  border-radius:50%;
}
.cloud::before{width:60%;height:140%;top:-70%;left:10%}
.cloud::after{width:50%;height:120%;top:-50%;left:50%}

.c1{width:220px;height:70px;top:20%;left:-250px;animation-duration:60s}
.c2{width:300px;height:90px;top:45%;left:-350px;animation-duration:90s}
.c3{width:160px;height:55px;top:70%;left:-200px;animation-duration:75s}

@keyframes cloudMove{
  to{transform:translateX(140vw)}
}

body.dark .cloud{background:#aaa;opacity:.25}

/* SUN */
.sun{
  position:absolute;
  width:140px;
  height:140px;
  background:#ffd93b;
  border-radius:50%;
  top:80px;
  right:100px;
  box-shadow:0 0 80px #ffd93b;
  animation:pulse 4s infinite alternate;
  display:none;
}
@keyframes pulse{
  from{transform:scale(1)}
  to{transform:scale(1.08)}
}

/* RAIN */
.rain{
  position:absolute;
  inset:0;
  display:none;
}
.drop{
  position:absolute;
  width:2px;
  height:15px;
  background:rgba(255,255,255,.6);
  animation:rain 1s linear infinite;
}
@keyframes rain{
  to{transform:translateY(100vh)}
}

/* NAV */
nav{
  height:70px;
  padding:0 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:rgba(255,255,255,.9);
  backdrop-filter:blur(12px);
}
body.dark nav{background:rgba(15,15,15,.9)}
nav h2{color:#6a5cff}

.toggle{
  border:none;
  background:#6a5cff;
  color:white;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
}

/* MAIN */
.main{
  height:calc(100vh - 70px);
  display:flex;
  justify-content:center;
  align-items:center;
}

/* CARD */
.box{
  width:360px;
  padding:30px;
  border-radius:22px;
  text-align:center;
  background:rgba(255,255,255,.35);
  backdrop-filter:blur(18px);
  box-shadow:0 25px 45px rgba(0,0,0,.35);
  animation:fadeUp .8s ease;
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:translateY(0)}
}
body.dark .box{background:rgba(0,0,0,.35)}

input{
  width:70%;
  padding:10px;
  border-radius:12px;
  border:none;
  outline:none;
}
button.search{
  padding:10px 18px;
  border:none;
  border-radius:12px;
  background:#6a5cff;
  color:white;
  cursor:pointer;
}
button.search:hover{transform:scale(1.1)}

.temp{
  font-size:44px;
  font-weight:700;
  margin:10px 0;
}
#out{margin-top:20px}
</style>
</head>

<body>

<div class="bg">
  <div class="sun" id="sun"></div>

  <div class="cloud c1"></div>
  <div class="cloud c2"></div>
  <div class="cloud c3"></div>

  <div class="rain" id="rain"></div>
</div>

<nav>
  <h2>üå¶ Weather Ultimate</h2>
  <button class="toggle" onclick="toggleDark()">üåô</button>
</nav>

<div class="main">
  <div class="box">
    <h3>Search Weather</h3><br>
    <input id="city" placeholder="City name">
    <button class="search" onclick="getWeather()">Search</button>
    <div id="out"></div>
  </div>
</div>
<script>
function toggleDark(){
  document.body.classList.toggle("dark");
}

function createRain(){
  const rain=document.getElementById("rain");
  rain.innerHTML="";
  for(let i=0;i<80;i++){
    const d=document.createElement("div");
    d.className="drop";
    d.style.left=Math.random()*100+"%";
    d.style.animationDuration=(0.5+Math.random())+"s";
    rain.appendChild(d);
  }
}

async function getWeather(){
  const city = document.getElementById("city").value.trim(); // ‚úÖ FIX
  const out = document.getElementById("out");
  const sun = document.getElementById("sun");
  const rain = document.getElementById("rain");

  sun.style.display="none";
  rain.style.display="none";

  if(city===""){
    out.innerHTML="‚ùå City ka naam likho";
    return;
  }

  out.innerHTML="‚è≥ Loading...";

  try{
    const res = await fetch(`https://wttr.in/${encodeURIComponent(city)}?format=j1`);
    if(!res.ok) throw new Error();

    const data = await res.json();
    const w = data.current_condition[0];
    const desc = w.weatherDesc[0].value.toLowerCase();

    if(desc.includes("sun") || desc.includes("clear")){
      sun.style.display="block";
    }
    if(desc.includes("rain") || desc.includes("drizzle")){
      rain.style.display="block";
      createRain();
    }

    out.innerHTML = `
      <h4>${city.toUpperCase()}</h4>
      <div class="temp">${w.temp_C}¬∞C</div>
      <div>${w.weatherDesc[0].value}</div>
      <div>üíß Humidity: ${w.humidity}%</div>
      <div>üå¨ Wind: ${w.windspeedKmph} km/h</div>
    `;
  }
  catch{
    out.innerHTML="‚ùå City not found / Internet issue";
  }
}
</script>


</body>
</html>


